<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parabéns Juliana</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            overflow: hidden;
            display: flex;
            align-items: center;
            height: 100vh;
            font-family: 'Courier New', Courier, monospace;
        }

        .marquee-container {
            white-space: nowrap;
            overflow: hidden;
            position: absolute;
            width: 100%;
        }

        .marquee-text {
            display: inline-block;
            font-size: 25vw;
            font-weight: bold;
            color: #0f0;
            text-shadow: 0 0 10px #0f0;
            padding-left: 100%;
            animation: scroll-left 12s linear infinite;
            transform: translate3d(0, 0, 0);
        }

        @keyframes scroll-left {
            0% {
                transform: translate3d(0, 0, 0);
            }

            100% {
                transform: translate3d(-100%, 0, 0);
            }
        }

        /* Estilo para mostrar o erro se houver */
        #debug-console {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(50, 0, 0, 0.8);
            color: #fff;
            font-size: 14px;
            z-index: 9999;
            display: none;
            padding: 10px;
            white-space: normal;
        }
    </style>
</head>

<body>
    <div id="debug-console"></div>

    <div class="marquee-container">
        <div class="marquee-text" id="texto">
            INICIANDO...
        </div>
    </div>

    <script>
        // --- CONFIGURAÇÃO ---
        var BUCKET_ID = "Nx4eX6XbVusH98XQ86tkpg";
        var KEY = "mensagem";
        // Adicionei um numero aleatorio para evitar cache do servidor KVDB
        var URL_BASE = "https://kvdb.io/" + BUCKET_ID + "/" + KEY;

        var textoAtual = "";

        // Função para mostrar erros na tela do celular
        function logError(msg) {
            var debugEl = document.getElementById('debug-console');
            debugEl.style.display = 'block';
            debugEl.innerHTML += "ERRO: " + msg + "<br>";
        }

        // Intercepta erros globais de script
        window.onerror = function (message, source, lineno, colno, error) {
            logError(message);
        };

        function verificarTexto() {
            // Usando fetch com sintaxe antiga (.then) para compatibilidade
            var urlComCacheBuster = URL_BASE + "?t=" + new Date().getTime();

            fetch(urlComCacheBuster)
                .then(function (response) {
                    if (!response.ok) {
                        throw new Error("Status " + response.status);
                    }
                    return response.text();
                })
                .then(function (novoTexto) {
                    if (novoTexto && novoTexto !== textoAtual) {
                        textoAtual = novoTexto;
                        document.getElementById('texto').innerText = textoAtual;
                    }
                })
                .catch(function (error) {
                    // Se der erro de rede ou certificado, vai aparecer aqui
                    logError(error.message);
                    // Tenta mostrar o erro no letreiro também para ficar bem visível
                    document.getElementById('texto').innerText = "ERRO: " + error.message;
                    document.getElementById('texto').style.color = "red";
                });
        }

        // Tenta rodar a primeira vez
        try {
            verificarTexto();
            setInterval(verificarTexto, 30000);
        } catch (e) {
            logError("Falha crítica: " + e.message);
        }
    </script>
</body>

</html>